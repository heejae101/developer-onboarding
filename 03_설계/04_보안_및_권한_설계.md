# [상세 설계] 보안 및 권한 설계

## 1. 보안 원칙
- **최소 권한의 원칙**: AI 에이전트와 MCP 서버는 사전에 허용된 디렉토리와 API에만 접근 가능해야 함.
- **데이터 격리**: 사용자별 업무 기록 및 실습 이력은 타인에게 노출되지 않도록 서버 측에서 검증.

---

## 2. 사용자 권한 체계 (RBAC)

| 역할 (Role) | 주요 권한 | 비고 |
| :--- | :--- | :--- |
| **신입 사원** | 가이드 조회, 실습 수행, 본인 업무 기록 관리 | 가장 기본적인 권한 |
| **시니어/관리자** | 프로젝트 룰(`rules.md`) 수정, 팀원 진행 상황 리뷰 | 관리 포인트 접근 허용 |
| **AI 에이전트** | 프로젝트 룰 읽기, 허용된 도구 실행, 알림 발송 | MCP를 통해 위임된 권한만 수행 |

---

## 3. MCP 보안 설계 (Sandboxing)
- **파일 시스템**: 에이전트는 `/workspace/onboarding` 하위 디렉토리만 읽기/쓰기 가능.
- **인증**: Java Backend가 Python MCP 서버에 접근할 때 인증 토큰(API Key) 기반 통신 수행.

---

## 4. API 보안
- **JWT 인증**: 모든 프런트엔드 요청은 JWT 토큰을 포함해야 함.
- **Input Validation**: LLM에 전달되기 전, 악의적인 프롬프트(Prompt Injection)를 방지하기 위한 필터링 레이어 구축.
